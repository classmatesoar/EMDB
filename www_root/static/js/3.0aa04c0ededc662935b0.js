webpackJsonp([3],{XCev:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("ZLEe"),s=n.n(o),i=n("4YfN"),a=n.n(i),r=n("R4Sj"),c={data:function(){return{code:"",form:{mobile:"",code:"",nickName:"",headImg:""},headImgLady:["https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3841743209,952064471&fm=27&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1458112453,1492404578&fm=15&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2627188576,3710023153&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1714713906,334631884&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3276179142,1686381254&fm=26&gp=0.jpg"],headImgMan:["https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2604881976,4272289404&fm=26&gp=0.jpg","http://img1.imgtn.bdimg.com/it/u=2112694706,1016932601&fm=26&gp=0.jpg","http://img2.imgtn.bdimg.com/it/u=1029438222,3343725378&fm=26&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1505373511,2564798002&fm=27&gp=0.jpg","https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3240526767,3117441803&fm=27&gp=0.jpg"],formItems:[{key:"mobile",label:"ID",placeholder:"请输入ID",type:"number",required:!0,clearable:!0,maxlength:"11",show:!0},{key:"nickName",label:"昵称",placeholder:"请输入昵称",required:!0,clearable:!0,maxlength:"8",show:!0},{key:"code",label:"验证码",placeholder:"请输入验证码",type:"number",required:!0,clearable:!0,maxlength:"4",show:!0,btn:{size:"small",type:"primary",text:"获取验证码",disabled:!0}},{key:"headImg",label:"头像",placeholder:"请输入头像地址",clearable:!0,show:!0}]}},computed:a()({},Object(r.c)(["personInfoCheck","personInfo"]),{submitDisabeld:function(){var e=this.form,t=this.formItems,n=(this.personInfo,this.personInfoCheck,e.mobile),o=e.nickName,s=e.code,i=!0;if(this.personInfoCheck){var a=t.filter(function(e){return e.show}).map(function(e){return e.key}),r=a.find(function(t){return e[t]});r&&(i=!1)}else CHECK_PHONE_NUM(n)&&o?s==this.code&&(i=!1):i=!0;return i},submitText:function(){var e="登录";return this.personInfoCheck&&(e="修改",this.formItems.forEach(function(e){return e.required=!1})),e}}),methods:a()({},Object(r.d)(["updatePersonInfo"]),{enter:function(e){e},itemBtn:function(e){var t=this;switch(e){case"code":this.$http.get("@remote/app/user/sendCode.json",{params:{mobile:this.form.mobile}}).then(function(e){t.code=e.verifycode}).catch(function(e){})}},login:function(){if(this.personInfoCheck){var e=a()({},this.form);s()(e).forEach(function(t){e[t]||delete e[t]}),this.updatePersonInfo(e)}else this.updatePersonInfo(this.form);this.$emit("close")}}),watch:{"form.mobile":function(e,t){var n=this.formItems.find(function(e){return"code"==e.key});CHECK_PHONE_NUM(e)?n.btn.disabled=!1:n.btn.disabled=!0}},created:function(){var e=this;s()(this.form).forEach(function(t){e.form[t]=e.personInfo[t]}),this.code=1111,this.form.code=1111,this.form.mobile="1"+(7*Math.floor(Math.random())+3)+Math.round(1e9*Math.random()),this.personInfoCheck&&this.formItems.forEach(function(e){"code"!=e.key&&"mobile"!=e.key||(e.show=!1)})}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"js-pv10 appCommonPadingH"},[n("form",{attrs:{action:"javascript:return true"},on:{submit:function(e){e.preventDefault()}}},[n("van-cell-group",e._l(e.formItems.filter(function(e){return"code"!=e.key}),function(t,o){return t.show?n("van-field",{key:o,attrs:{label:t.label,placeholder:t.placeholder,type:t.type,required:t.required,clearable:t.clearable,maxlength:t.maxlength},on:{keypress:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.enter(t.key)}},model:{value:e.form[t.key],callback:function(n){e.$set(e.form,t.key,"string"==typeof n?n.trim():n)},expression:"form[item.key]"}},[t.btn?n("van-button",{attrs:{slot:"button",size:t.btn.size,type:t.btn.type,disabled:t.btn.disabled},on:{click:function(n){return e.itemBtn(t.key)}},slot:"button"},[n("span",{domProps:{textContent:e._s(t.btn.text)}})]):e._e()],1):e._e()}),1),e._v(" "),n("div",[e._v("\n  选择头像\n")]),e._v(" "),n("div",{staticClass:"headImgBox headImgMan js-flex"},e._l(e.headImgMan,function(t,o){return n("div",{key:o,staticClass:"col-p20 js-phv5"},[n("app-head-img",{staticClass:"headImg pull-left js-circle full-width",class:{headFocus:t==e.form.headImg},attrs:{headImg:t},nativeOn:{click:function(n){e.form.headImg=t}}})],1)}),0),e._v(" "),n("div",{staticClass:"headImgBox headImgLady js-flex"},e._l(e.headImgLady,function(t,o){return n("div",{key:o,staticClass:"col-p20 js-phv5"},[n("app-head-img",{staticClass:"headImg pull-left js-circle full-width",class:{headFocus:t==e.form.headImg},attrs:{headImg:t},nativeOn:{click:function(n){e.form.headImg=t}}})],1)}),0),e._v(" "),n("div",{},[n("van-button",{attrs:{size:"large",type:"primary",disabled:e.submitDisabeld},on:{click:e.login}},[e._v(e._s(e.submitText))])],1)],1)])},staticRenderFns:[]};var l=n("C7Lr")(c,h,!1,function(e){n("hJrw")},"data-v-ed7458ca",null);t.default=l.exports},hJrw:function(e,t){}});